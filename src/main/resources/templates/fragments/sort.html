<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Pagination Fragment</title>
</head>
<body>
<div th:fragment="sortFragment (selectedAuthorId, selectedTagIdsForSort, selectedSortBy, selectedOrder, url)">
    <form th:action="@{/posts}" method="get" class="d-flex flex-wrap gap-2 justify-content-md-end">
        <label class="form-label me-2 mb-0 align-self-center">Sort by</label>
        <th:block th:each="entry : ${param}">
            <th:block th:if="${entry.key != 'order' and entry.key != 'sortField'}">
                <input type="hidden" th:name="${entry.key}" th:value="${entry.value[0]}" />
            </th:block>
        </th:block>
        <select class="form-select w-auto" name="sortField">
            <option th:each="s : ${sortBy}" th:value="${s.value}" th:text="${s.key}"
                    th:selected="${s.value == selectedSortBy}"></option>
        </select>
        <input type="hidden" name="order" th:value="${selectedOrder == 'asc' ? 'desc' : 'asc'}" />
        <button type="submit" class="btn btn-secondary ms-2">
            <i class="fas" th:classappend="${selectedOrder == 'asc'} ? 'fa-arrow-up' : 'fa-arrow-down'"></i>
        </button>
    </form>
</div>
</body>
</html>